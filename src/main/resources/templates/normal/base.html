<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<!-- <link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous"> -->

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
		integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
		integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
		crossorigin="anonymous" />

	<link rel="stylesheet" th:href="@{/css/style.css}" />

	<style type="text/css">
		.nav-link::after {
			content: '';
			position: absolute;
			left: 0;
			bottom: 5px;
			width: 0%;
			height: 2px;
			background-color: aqua !important;
			transition: width 1.3s ease;
		}

		.nav-link:hover::after {
			width: 100%;
		}
	</style>


	<title th:text="${title}">Default Title</title>
	<link rel="icon" href="/image/contact.svg">

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<!--
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	-->

	<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

</head>

<body>


	<!-- navbar start-->
	<nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-info">

		<!-- <a href="#" th:href="@{/user/dashboard}" class="navbar-brand logo">Smart Contact Manager</a> -->
		<span class="fw-bold text-white d-inline ms-2">
			<a href="#" th:href="@{/user/dashboard}" class="navbar-brand text-uppercase logo">
				<!-- Smart Contact Manager -->
				<i class="fa fa-address-book fa-lg"></i> SCM
			</a>
		</span>

		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">

			<ul class="navbar-nav ms-auto capitalized fw-bold me-2">
				<li class="nav-item">
					<a th:href="@{/user/dashboard}" href="#" class="nav-link text-white position-relative"
						onmouseover="this.style.transform='scale(1.10)';" onmouseout="this.style.transform='scale(1)';">
						Dashboard<span class="sr-only"></span>
					</a>
				</li>

				<li class="nav-item">
					<a th:href="@{/user/profile}" href="#" class="nav-link text-white position-relative"
						onmouseover="this.style.transform='scale(1.10)';" onmouseout="this.style.transform='scale(1)';">
						Profile - <span th:text="${user.name}"></span>
					</a>
				</li>

				<li class="nav-item"><a th:href="@{/user/sendmessage}" href="#"
						class="nav-link text-white position-relative" onmouseover="this.style.transform='scale(1.10)';"
						onmouseout="this.style.transform='scale(1)';">
						Feedback<span class="sr-only"></span>
					</a>
				</li>

				<li class="nav-item">
					<a th:href="@{/logout}" href="#" class="nav-link text-white position-relative"
						onmouseover="this.style.transform='scale(1.10)';" onmouseout="this.style.transform='scale(1)';">
						Logout
					</a>
				</li>
			</ul>
		</div>
	</nav>
	<!-- navbar end -->



	<!-- sidebar start -->
	<div class="pt-5 h-100 position-fixed sidebar" style="width: 18%; z-index: 99999999">

		<span onclick="toggleSidebar()" class="crossBtn position-absolute"
			style="font-size: 36px; cursor: pointer; top: 0; right: 35px;">&times;</span>
		<a href="#" th:href="@{/user/dashboard}" id="dashboard"
			class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-home fa-lg me-3"></i> Dashboard
		</a>
		<a href="#" th:href="@{/user/profile}" id="profile"
			class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-user-circle fa-lg me-3"></i> Your Profile
		</a>
		<a href="#" th:href="@{/user/showcontacts/0}" id="showcontacts"
			class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-id-card-alt fa-lg me-3"></i> View Contacts
		</a>
		<a href="#" th:href="@{/user/addcontact}" id="addcontact"
			class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-user-plus fa-lg me-3"></i> Add Contact
		</a>
		<a href="#" th:href="@{@{/user/settings}}" id="settings"
			class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-cogs fa-lg me-3"></i> Settings
		</a>
		<a href="#" th:href="@{@{/user/sendmessage}}" id="feedback"
			class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-question-circle fa-lg me-3"></i> Feedback
		</a>
		<a href="#" th:href="@{/logout}" class="ps-4 py-2 w-100 d-block text-decoration-none text-secondary item"
			onmouseover="this.style.background='#e2e2e2'" onmouseout="this.style.background='inherit'">
			<i class="fas fa-sign-out-alt fa-lg me-3"></i> Logout
		</a>

		<div class="w-100 mt-2" style="height: 1px; background: #e2e2e2;"></div>

	</div>
	<!-- sidebar end -->



	<!-- content area -->
	<div class="content mt-5 mb-3" style="margin-left: 18%;">

		<i onclick="toggleSidebar()" class="fas fa-bars mt-3 ms-1 barsBtn" style="cursor: pointer;"></i>

		<!-- message box -->
		<div th:if="${session.message}" class="container">
			<div th:classappend="${'alert-'+session.message.type}" class="alert text-center" role="alert">
				<span th:text="${session.message.content}"></span>
			</div>
			<th:block th:text="${@sessionHelper.removeMessageFromSession()}"></th:block>
		</div>

		<div th:replace="${content}"></div>

	</div>
	<!-- content end -->


	<!-- Optional JavaScript -->
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
		integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
		integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
		crossorigin="anonymous"></script>

	<script>
		function deleteContact(cid) {
			swal({
				title: "Are you sure ?",
				text: "do you want to delete this contact ?",
				icon: "warning",
				buttons: true,
				dangerMode: true,
			})
				.then((willDelete) => {
					if (willDelete) {
						window.location = "/user/delete/" + cid;
					} else {
						swal("Your contact is not deleted.");
					}
				});
		}
	</script>
	<script>
		function deleteAccount(id) {
			swal({
				title: "Are you sure ?",
				text: "do you want to delete your account ?",
				icon: "error",
				buttons: true,
				dangerMode: true,
			})
				.then((willDelete) => {
					if (willDelete) {
						$.ajax({
							url: '/user/deleteaccount',
							type: 'POST',
							success: function (result) {
								window.location = '/';
							},
							error: function (xhr, status, error) {
								console.error(xhr.responseText);
							}
						});
					} else {
						swal("Your account is not deleted.");
					}
				});
		}
	</script>

	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
	<script th:src="@{/js/script.js}"></script>
</body>

</html>